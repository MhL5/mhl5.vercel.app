{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "useEventListener",
  "type": "registry:hook",
  "title": "useEventListener",
  "description": "A hook for adding event listeners with proper cleanup.",
  "files": [
    {
      "path": "src/registry/hooks/useEventListener/useEventListener.ts",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useEffectEvent } from \"react\";\r\n\r\n// Overload for Window events\r\nexport default function useEventListener<T extends keyof WindowEventMap>(\r\n  eventType: T,\r\n  callback: (e: WindowEventMap[T]) => void,\r\n  element?: Window | undefined,\r\n): void;\r\n\r\n// Overload for Document events\r\nexport default function useEventListener<T extends keyof DocumentEventMap>(\r\n  eventType: T,\r\n  callback: (e: DocumentEventMap[T]) => void,\r\n  element: Document | undefined,\r\n): void;\r\n\r\n// Overload for HTMLElement and EventTarget (ref.current) events\r\nexport default function useEventListener<T extends keyof HTMLElementEventMap>(\r\n  eventType: T,\r\n  callback: (e: HTMLElementEventMap[T]) => void,\r\n  element: HTMLElement | EventTarget | undefined,\r\n): void;\r\n\r\nexport default function useEventListener<\r\n  T extends keyof (WindowEventMap & DocumentEventMap & HTMLElementEventMap),\r\n>(\r\n  eventType: T,\r\n  callback: (e: Event) => void,\r\n  element: Window | Document | HTMLElement | EventTarget | undefined = window,\r\n): void {\r\n  const eventHandler = useEffectEvent((e: Event) => {\r\n    callback(e);\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!element) return;\r\n    const abortController = new AbortController();\r\n\r\n    element.addEventListener(eventType, eventHandler, {\r\n      signal: abortController.signal,\r\n    });\r\n\r\n    return () => abortController.abort();\r\n  }, [eventType, element]);\r\n}\r\n",
      "type": "registry:hook"
    }
  ],
  "meta": {
    "url": "/snippets/hooks/useEventListener"
  }
}