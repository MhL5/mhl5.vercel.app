{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ErrorBoundary",
  "type": "registry:ui",
  "title": "ErrorBoundary",
  "description": "a React boundary component that renders a fallback UI when an error occurs.",
  "files": [
    {
      "path": "src/registry/new-york/ErrorBoundary/ErrorBoundary.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport type { ReactNode } from \"react\";\r\nimport { Component, useTransition } from \"react\";\r\n\r\ntype ErrorBoundaryProps = {\r\n  children: ReactNode;\r\n  fallback?: (props: ErrorBoundaryFallbackProps) => ReactNode;\r\n};\r\n\r\ntype ErrorBoundaryState = {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n};\r\n\r\nclass ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n\r\n    // Bind the method to preserve 'this' context\r\n    this.handleRetry = this.handleRetry.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n    };\r\n  }\r\n\r\n  handleRetry() {\r\n    this.setState({ hasError: false, error: null });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError && this.state.error) {\r\n      if (\"fallback\" in this.props && this.props.fallback)\r\n        return this.props.fallback({\r\n          error: this.state.error,\r\n          onRetry: this.handleRetry,\r\n        });\r\n\r\n      return (\r\n        <ErrorBoundaryFallback\r\n          error={this.state.error}\r\n          onRetry={this.handleRetry}\r\n        />\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\ntype ErrorBoundaryFallbackProps = {\r\n  className?: string;\r\n  label?: string;\r\n  error: Error;\r\n  onRetry: () => void;\r\n};\r\n\r\nfunction ErrorBoundaryFallback({\r\n  className,\r\n  label,\r\n  error,\r\n  onRetry,\r\n}: ErrorBoundaryFallbackProps) {\r\n  const [isPending, startTransition] = useTransition();\r\n\r\n  function handleRetry() {\r\n    startTransition(() => {\r\n      onRetry();\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      role=\"alert\"\r\n      aria-busy={isPending}\r\n      className={cn(\r\n        \"my-8 flex w-full flex-col items-center justify-center gap-3 text-center font-medium\",\r\n        className,\r\n      )}\r\n      data-slot=\"ErrorBoundaryFallback\"\r\n    >\r\n      <p\r\n        data-slot=\"ErrorBoundaryFallbackMessage\"\r\n        className=\"text-destructive !line-clamp-2\"\r\n      >\r\n        {label ? `${label}: ` : error?.name ? `${error.name}: ` : \"\"}\r\n        {error?.message || \"Something went wrong!\"}\r\n      </p>\r\n      <Button\r\n        data-slot=\"ErrorBoundaryFallbackRetryButton\"\r\n        onClick={handleRetry}\r\n        variant=\"ghost\"\r\n        type=\"button\"\r\n        className=\"underline underline-offset-8\"\r\n        disabled={isPending}\r\n      >\r\n        {isPending ? <Loader2 className=\"animate-spin\" /> : \"Retry\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport { ErrorBoundary, ErrorBoundaryFallback };\r\n",
      "type": "registry:ui",
      "target": "src/components/utils/ErrorBoundary.tsx"
    }
  ]
}