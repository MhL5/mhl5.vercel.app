{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "DrawerDialog",
  "type": "registry:ui",
  "title": "DrawerDialog",
  "description": "a responsive dialog that renders a drawer (`max-width: 640px`) and a dialog on larger screens.",
  "registryDependencies": [
    "dialog",
    "drawer",
    "https://mhl5.vercel.app/r/useMediaQuery.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/DrawerDialog/DrawerDialog.tsx",
      "content": "\"use client\";\n\nimport { type ComponentProps, createContext, type ReactNode, use } from \"react\";\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Drawer,\n  DrawerClose,\n  DrawerContent,\n  DrawerDescription,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerOverlay,\n  DrawerPortal,\n  DrawerTitle,\n  DrawerTrigger,\n} from \"@/components/ui/drawer\";\nimport { cn } from \"@/lib/utils\";\nimport { useMediaQuery } from \"@/registry/hooks/useMediaQuery/useMediaQuery\";\n\ntype DrawerDialogContextType = {\n  isSm: boolean | undefined;\n};\n\nconst DrawerDialogContext = createContext<DrawerDialogContextType | null>(null);\n\ntype DrawerDialogProviderProps = {\n  children: ReactNode;\n  isOpen?: ComponentProps<typeof Dialog>[\"open\"];\n  setIsOpen?: ComponentProps<typeof Dialog>[\"onOpenChange\"];\n};\n\nfunction DrawerDialogProvider({\n  children,\n  isOpen,\n  setIsOpen,\n}: DrawerDialogProviderProps) {\n  const isSm = useMediaQuery(\"(min-width: 40rem)\");\n\n  return (\n    <DrawerDialogContext value={{ isSm }}>\n      {isSm ? (\n        <Dialog open={isOpen} onOpenChange={setIsOpen}>\n          {children}\n        </Dialog>\n      ) : (\n        <Drawer\n          // autoFocus={open} fixes block aria hidden attribute accessibility bug\n          // repositionInputs={true} prevents safari keyboard layout shift on dismissal\n          open={isOpen}\n          onOpenChange={setIsOpen}\n        >\n          {children}\n        </Drawer>\n      )}\n    </DrawerDialogContext>\n  );\n}\n\nfunction useDrawerDialogContext() {\n  const context = use(DrawerDialogContext);\n  if (!context)\n    throw new Error(\n      \"useDrawerDialogContext must be used within a DrawerDialogProvider\",\n    );\n  return context;\n}\n\ntype DrawerDialogProps = DrawerDialogProviderProps;\n\nfunction DrawerDialog(props: DrawerDialogProps) {\n  return <DrawerDialogProvider {...props} />;\n}\n\ntype DrawerDialogContentProps = ComponentProps<typeof DialogContent>;\n\nfunction DrawerDialogContent({\n  className,\n  ...props\n}: DrawerDialogContentProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm)\n    return (\n      <DialogContent\n        data-slot=\"drawer-dialog-content\"\n        className={cn(\n          \"sm:[&:has([data-slot='drawer-dialog-scroll-area'])]:p-0\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  return (\n    <DrawerContent\n      data-slot=\"drawer-dialog-content\"\n      className={className}\n      {...props}\n    />\n  );\n}\n\ntype DrawerDialogTriggerProps = ComponentProps<typeof DialogTrigger>;\n\nfunction DrawerDialogTrigger(props: DrawerDialogTriggerProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm)\n    return <DialogTrigger data-slot=\"drawer-dialog-trigger\" {...props} />;\n  return <DrawerTrigger data-slot=\"drawer-dialog-trigger\" {...props} />;\n}\n\ntype DrawerDialogCloseProps = ComponentProps<typeof DialogClose>;\n\nfunction DrawerDialogClose(props: DrawerDialogCloseProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm) return <DialogClose data-slot=\"drawer-dialog-close\" {...props} />;\n  return <DrawerClose data-slot=\"drawer-dialog-close\" {...props} />;\n}\n\ntype DrawerDialogDescriptionProps = ComponentProps<typeof DialogDescription>;\n\nfunction DrawerDialogDescription(props: DrawerDialogDescriptionProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm)\n    return (\n      <DialogDescription data-slot=\"drawer-dialog-description\" {...props} />\n    );\n  return <DrawerDescription data-slot=\"drawer-dialog-description\" {...props} />;\n}\n\ntype DrawerDialogTitleProps = ComponentProps<typeof DialogTitle>;\n\nfunction DrawerDialogTitle(props: DrawerDialogTitleProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm) return <DialogTitle data-slot=\"drawer-dialog-title\" {...props} />;\n  return <DrawerTitle data-slot=\"drawer-dialog-title\" {...props} />;\n}\n\ntype DrawerDialogFooterProps = ComponentProps<typeof DialogFooter>;\n\nfunction DrawerDialogFooter(props: DrawerDialogFooterProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm) return <DialogFooter data-slot=\"drawer-dialog-footer\" {...props} />;\n  return <DrawerFooter data-slot=\"drawer-dialog-footer\" {...props} />;\n}\n\ntype DrawerDialogHeaderProps = ComponentProps<typeof DialogHeader>;\n\nfunction DrawerDialogHeader(props: DrawerDialogHeaderProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm) return <DialogHeader data-slot=\"drawer-dialog-header\" {...props} />;\n  return <DrawerHeader data-slot=\"drawer-dialog-header\" {...props} />;\n}\n\ntype DrawerDialogOverlayProps = ComponentProps<typeof DialogOverlay>;\n\nfunction DrawerDialogOverlay(props: DrawerDialogOverlayProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm)\n    return <DialogOverlay data-slot=\"drawer-dialog-overlay\" {...props} />;\n  return <DrawerOverlay data-slot=\"drawer-dialog-overlay\" {...props} />;\n}\n\ntype DrawerDialogPortalProps = ComponentProps<typeof DialogPortal>;\n\nfunction DrawerDialogPortal(props: DrawerDialogPortalProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  if (isSm) return <DialogPortal data-slot=\"drawer-dialog-portal\" {...props} />;\n  return <DrawerPortal data-slot=\"drawer-dialog-portal\" {...props} />;\n}\n\ntype DrawerDialogScrollAreaProps = ComponentProps<\"div\">;\n\nconst drawerContentScrollAreaClassNames = \"max-h-[90dvh] overflow-y-auto\";\nconst dialogContentScrollAreaClassNames =\n  \"max-h-[90dvh] w-[auto] overflow-y-auto p-6 sm:max-w-[80svw]\";\n\nfunction DrawerDialogScrollArea({\n  className,\n  ...props\n}: DrawerDialogScrollAreaProps) {\n  const { isSm } = useDrawerDialogContext();\n\n  return (\n    <div\n      data-slot=\"drawer-dialog-scroll-area\"\n      className={cn(\n        isSm\n          ? dialogContentScrollAreaClassNames\n          : drawerContentScrollAreaClassNames,\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  DrawerDialog,\n  DrawerDialogClose,\n  DrawerDialogContent,\n  DrawerDialogDescription,\n  DrawerDialogFooter,\n  DrawerDialogHeader,\n  DrawerDialogOverlay,\n  DrawerDialogPortal,\n  DrawerDialogScrollArea,\n  DrawerDialogTitle,\n  DrawerDialogTrigger,\n};\n",
      "type": "registry:ui"
    }
  ],
  "meta": {
    "url": "/snippets/components/DrawerDialog"
  }
}