{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "DrawerDialog",
  "type": "registry:ui",
  "title": "DrawerDialog",
  "description": "a responsive dialog that renders a drawer (`max-width: 640px`) and a dialog on larger screens.",
  "registryDependencies": [
    "dialog",
    "drawer",
    "https://mhl5.vercel.app/r/useMediaQuery.json"
  ],
  "files": [
    {
      "path": "src/registry/new-york/DrawerDialog/DrawerDialog.tsx",
      "content": "\"use client\";\r\n\r\nimport { type ComponentProps, createContext, type ReactNode, use } from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Drawer,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerDescription,\r\n  DrawerFooter,\r\n  DrawerHeader,\r\n  DrawerOverlay,\r\n  DrawerPortal,\r\n  DrawerTitle,\r\n  DrawerTrigger,\r\n} from \"@/components/ui/drawer\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useMediaQuery } from \"@/registry/hooks/useMediaQuery/useMediaQuery\";\r\n\r\ntype DrawerDialogContextType = {\r\n  isSm: boolean | undefined;\r\n};\r\n\r\nconst DrawerDialogContext = createContext<DrawerDialogContextType | null>(null);\r\n\r\ntype DrawerDialogProviderProps = {\r\n  children: ReactNode;\r\n  isOpen?: ComponentProps<typeof Dialog>[\"open\"];\r\n  setIsOpen?: ComponentProps<typeof Dialog>[\"onOpenChange\"];\r\n};\r\n\r\nfunction DrawerDialogProvider({\r\n  children,\r\n  isOpen,\r\n  setIsOpen,\r\n}: DrawerDialogProviderProps) {\r\n  const isSm = useMediaQuery(\"(min-width: 42rem)\");\r\n\r\n  return (\r\n    <DrawerDialogContext value={{ isSm }}>\r\n      {isSm ? (\r\n        <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n          {children}\r\n        </Dialog>\r\n      ) : (\r\n        <Drawer\r\n          // autoFocus={open} fixes block aria hidden attribute accessibility bug\r\n          // repositionInputs={true} prevents safari keyboard layout shift on dismissal\r\n          open={isOpen}\r\n          onOpenChange={setIsOpen}\r\n        >\r\n          {children}\r\n        </Drawer>\r\n      )}\r\n    </DrawerDialogContext>\r\n  );\r\n}\r\n\r\nfunction useDrawerDialogContext() {\r\n  const context = use(DrawerDialogContext);\r\n  if (!context)\r\n    throw new Error(\r\n      \"useDrawerDialogContext must be used within a DrawerDialogProvider\",\r\n    );\r\n  return context;\r\n}\r\n\r\ntype DrawerDialogProps = DrawerDialogProviderProps;\r\n\r\nfunction DrawerDialog(props: DrawerDialogProps) {\r\n  return <DrawerDialogProvider {...props} />;\r\n}\r\n\r\ntype DrawerDialogContentProps = ComponentProps<typeof DialogContent>;\r\n\r\nfunction DrawerDialogContent({\r\n  className,\r\n  ...props\r\n}: DrawerDialogContentProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm)\r\n    return (\r\n      <DialogContent\r\n        data-slot=\"drawer-dialog-content\"\r\n        className={cn(\r\n          \"sm:[&:has([data-slot='drawer-dialog-scroll-area'])]:p-0\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  return (\r\n    <DrawerContent\r\n      data-slot=\"drawer-dialog-content\"\r\n      className={className}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\ntype DrawerDialogTriggerProps = ComponentProps<typeof DialogTrigger>;\r\n\r\nfunction DrawerDialogTrigger(props: DrawerDialogTriggerProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm)\r\n    return <DialogTrigger data-slot=\"drawer-dialog-trigger\" {...props} />;\r\n  return <DrawerTrigger data-slot=\"drawer-dialog-trigger\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogCloseProps = ComponentProps<typeof DialogClose>;\r\n\r\nfunction DrawerDialogClose(props: DrawerDialogCloseProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm) return <DialogClose data-slot=\"drawer-dialog-close\" {...props} />;\r\n  return <DrawerClose data-slot=\"drawer-dialog-close\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogDescriptionProps = ComponentProps<typeof DialogDescription>;\r\n\r\nfunction DrawerDialogDescription(props: DrawerDialogDescriptionProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm)\r\n    return (\r\n      <DialogDescription data-slot=\"drawer-dialog-description\" {...props} />\r\n    );\r\n  return <DrawerDescription data-slot=\"drawer-dialog-description\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogTitleProps = ComponentProps<typeof DialogTitle>;\r\n\r\nfunction DrawerDialogTitle(props: DrawerDialogTitleProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm) return <DialogTitle data-slot=\"drawer-dialog-title\" {...props} />;\r\n  return <DrawerTitle data-slot=\"drawer-dialog-title\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogFooterProps = ComponentProps<typeof DialogFooter>;\r\n\r\nfunction DrawerDialogFooter(props: DrawerDialogFooterProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm) return <DialogFooter data-slot=\"drawer-dialog-footer\" {...props} />;\r\n  return <DrawerFooter data-slot=\"drawer-dialog-footer\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogHeaderProps = ComponentProps<typeof DialogHeader>;\r\n\r\nfunction DrawerDialogHeader(props: DrawerDialogHeaderProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm) return <DialogHeader data-slot=\"drawer-dialog-header\" {...props} />;\r\n  return <DrawerHeader data-slot=\"drawer-dialog-header\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogOverlayProps = ComponentProps<typeof DialogOverlay>;\r\n\r\nfunction DrawerDialogOverlay(props: DrawerDialogOverlayProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm)\r\n    return <DialogOverlay data-slot=\"drawer-dialog-overlay\" {...props} />;\r\n  return <DrawerOverlay data-slot=\"drawer-dialog-overlay\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogPortalProps = ComponentProps<typeof DialogPortal>;\r\n\r\nfunction DrawerDialogPortal(props: DrawerDialogPortalProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  if (isSm) return <DialogPortal data-slot=\"drawer-dialog-portal\" {...props} />;\r\n  return <DrawerPortal data-slot=\"drawer-dialog-portal\" {...props} />;\r\n}\r\n\r\ntype DrawerDialogScrollAreaProps = ComponentProps<\"div\">;\r\n\r\nconst drawerContentScrollAreaClassNames = \"max-h-[90dvh] overflow-y-auto\";\r\nconst dialogContentScrollAreaClassNames =\r\n  \"max-h-[90dvh] w-[auto] overflow-y-auto p-6 sm:max-w-[80svw]\";\r\n\r\nfunction DrawerDialogScrollArea({\r\n  className,\r\n  ...props\r\n}: DrawerDialogScrollAreaProps) {\r\n  const { isSm } = useDrawerDialogContext();\r\n\r\n  return (\r\n    <div\r\n      data-slot=\"drawer-dialog-scroll-area\"\r\n      className={cn(\r\n        isSm\r\n          ? dialogContentScrollAreaClassNames\r\n          : drawerContentScrollAreaClassNames,\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport {\r\n  DrawerDialog,\r\n  DrawerDialogClose,\r\n  DrawerDialogContent,\r\n  DrawerDialogDescription,\r\n  DrawerDialogFooter,\r\n  DrawerDialogHeader,\r\n  DrawerDialogOverlay,\r\n  DrawerDialogPortal,\r\n  DrawerDialogScrollArea,\r\n  DrawerDialogTitle,\r\n  DrawerDialogTrigger,\r\n};\r\n",
      "type": "registry:ui"
    }
  ]
}